!function(n,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define([],i):(n.elliptical.Event=i(),n.returnExports=n.elliptical.Event)}(this,function(){var n={};return function(i){function t(){var n={},t=Function;return{emit:function(){var t,e,l,o=arguments,s=n[o[0]];s&&(t=s.length,e=o.length>1?Array.prototype.splice.call(o,1):[],setTimeout(function(){for(l=0;t>l;l+=1)s[l].apply(i,e);s=i=e=null},0))},on:function(i,e){if("string"!=typeof i)throw"invalid or missing channel";if(!(e instanceof t))throw"invalid or missing callback";return n[i]||(n[i]=[]),n[i].push(e),{channel:i,callback:e}},off:function(i,e){if(i.channel&&i.callback&&(e=i.callback,i=i.channel),"string"!=typeof i)throw"invalid or missing channel";if(!(e instanceof t))throw"invalid or missing callback";var l,o=n[i],s=o instanceof Array?o.length:0;for(l=0;s>l;l+=1)if(o[l]===e){o.splice(l,1);break}},flush:function(){n={}},list:function(i){i&&i(n)}}}n.init=t()}(this),n.init}),function(n,i){"undefined"!=typeof module&&module.exports?module.exports=i(require("ellipsis-element"),require("elliptical-event")):"function"==typeof define&&define.amd?define(["ellipsis-element","elliptical-event"],i):n.returnExports=i($,n.elliptical.Event)}(this,function(n,i){var t=n.elliptical.utils,e=t._;return n.element("elliptical.pubsub",{options:{channel:null,eventBlock:!1},_initElement:function(){this._data.subscriptions=[],this._subscriptions()},_publish:function(n,t,e,l){var o=arguments.length;2===o?(e=0,l=!1):3===o&&("boolean"==typeof e?(l=e,e=0):l=!1),(!this.options.eventBlock||l)&&setTimeout(function(){i.emit(n,t)},e)},_subscribe:function(n,t,l,o){var s=arguments.length;2===s?(o=t,t=null,l=null):3===s&&(o=l,l=350);var u={},c=null;"throttle"===t?c=e.throttle(o,l):"debounce"===t?(u.leading=!0,u.trailing=!1,c=e.debounce(o,l,u)):c=o;var a={channel:n,fn:c};this._data.subscriptions&&this._data.subscriptions.length||(this._data.subscriptions=[]),this._data.subscriptions.push(a),i.on(n,c)},_subscriptions:n.noop,_unbindSubscriptions:function(){var n=this._data.subscriptions;n.forEach(function(n){i.off(n.channel,n.fn)})},_dispose:function(){this._unbindSubscriptions()}}),n});